{"version":3,"sources":["../src/ReactHeight.js"],"names":["ReactHeight","createClass","propTypes","children","PropTypes","node","isRequired","onHeightReady","func","hidden","bool","dirty","getDefaultProps","getInitialState","height","props","componentDidMount","wrapper","clientHeight","setState","state","componentWillReceiveProps","shouldComponentUpdate","nextProps","nextState","componentDidUpdate","setWrapperRef","el","render","_onHeightReady","_dirty","overflow"],"mappings":";;;;;;;;AAIA;;;;AACA;;;;6NALA;AACA;;AAOA,IAAMA,cAAc,gBAAMC,WAAN,CAAkB;AAAA;;AACpCC,aAAW;AACTC,cAAU,gBAAMC,SAAN,CAAgBC,IAAhB,CAAqBC,UADtB;AAETC,mBAAe,gBAAMH,SAAN,CAAgBI,IAAhB,CAAqBF,UAF3B;AAGTG,YAAQ,gBAAML,SAAN,CAAgBM,IAHf;AAITC,WAAO,gBAAMP,SAAN,CAAgBM;AAJd,GADyB;;AASpCE,iBAToC,6BASlB;AAChB,WAAO,EAACH,QAAQ,KAAT,EAAgBE,OAAO,IAAvB,EAAP;AACD,GAXmC;AAcpCE,iBAdoC,6BAclB;AAChB,WAAO;AACLC,cAAQ,CADH,EACMH,OAAO,KAAKI,KAAL,CAAWJ;AADxB,KAAP;AAGD,GAlBmC;AAqBpCK,mBArBoC,+BAqBhB;AAAA;;AAClB,QAAMF,SAAS,KAAKG,OAAL,CAAaC,YAA5B;AACA,QAAMP,QAAQ,KAAd;;AAEA,SAAKQ,QAAL,CAAc,EAACL,cAAD,EAASH,YAAT,EAAd,EAA+B;AAAA,aAAM,MAAKI,KAAL,CAAWR,aAAX,CAAyB,MAAKa,KAAL,CAAWN,MAApC,CAAN;AAAA,KAA/B;AACD,GA1BmC;AA6BpCO,2BA7BoC,2CA6BS;AAAA,QAAlBlB,QAAkB,QAAlBA,QAAkB;AAAA,QAARQ,KAAQ,QAARA,KAAQ;;AAC3C,QAAIR,aAAa,KAAKY,KAAL,CAAWZ,QAAxB,IAAoCQ,KAAxC,EAA+C;AAC7C,WAAKQ,QAAL,CAAc,EAACR,OAAO,IAAR,EAAd;AACD;AACF,GAjCmC;AAoCpCW,uBApCoC,iCAoCdC,SApCc,EAoCHC,SApCG,EAoCQ;AAC1C,WAAO,+CAAe,IAAf,EAAqBD,SAArB,EAAgCC,SAAhC,CAAP;AACD,GAtCmC;AAyCpCC,oBAzCoC,gCAyCf;AAAA;;AACnB,QAAMX,SAAS,KAAKG,OAAL,CAAaC,YAA5B;AACA,QAAMP,QAAQ,KAAd;;AAEA,QAAIG,WAAW,KAAKM,KAAL,CAAWN,MAA1B,EAAkC;AAChC,WAAKK,QAAL,CAAc,EAACR,YAAD,EAAd;AACD,KAFD,MAEO;AACL,WAAKQ,QAAL,CAAc,EAACL,cAAD,EAASH,YAAT,EAAd,EAA+B;AAAA,eAAM,OAAKI,KAAL,CAAWR,aAAX,CAAyB,OAAKa,KAAL,CAAWN,MAApC,CAAN;AAAA,OAA/B;AACD;AACF,GAlDmC;AAqDpCY,eArDoC,yBAqDtBC,EArDsB,EAqDlB;AAChB,SAAKV,OAAL,GAAeU,EAAf;AACD,GAvDmC;AA0DpCC,QA1DoC,oBA0D3B;AAAA,iBAOH,KAAKb,KAPF;AAAA,QAEUc,cAFV,UAELtB,aAFK;AAAA,QAGEuB,MAHF,UAGLnB,KAHK;AAAA,QAILF,MAJK,UAILA,MAJK;AAAA,QAKLN,QALK,UAKLA,QALK;;AAAA,QAMFY,KANE;;AAAA,QAQAJ,KARA,GAQS,KAAKS,KARd,CAQAT,KARA;;;AAUP,QAAIF,UAAU,CAACE,KAAf,EAAsB;AACpB,aAAO,IAAP;AACD;;AAED,QAAIF,MAAJ,EAAY;AACV,aACE;AAAA;AAAA,UAAK,OAAO,EAACK,QAAQ,CAAT,EAAYiB,UAAU,QAAtB,EAAZ;AACE;AAAA;AAAA,qBAAK,KAAK,KAAKL,aAAf,IAAkCX,KAAlC;AAA0CZ;AAA1C;AADF,OADF;AAKD;;AAED,WAAO;AAAA;AAAA,iBAAK,KAAK,KAAKuB,aAAf,IAAkCX,KAAlC;AAA0CZ;AAA1C,KAAP;AACD;AAjFmC,CAAlB,CAApB;;kBAqFeH,W","file":"ReactHeight.js","sourcesContent":["/* eslint \"react/no-did-mount-set-state\":0 */\n/* eslint \"react/no-did-update-set-state\":0 */\n\n\nimport React from 'react';\nimport {shallowCompare} from 'react-addons-shallow-compare';\n\n\nconst ReactHeight = React.createClass({\n  propTypes: {\n    children: React.PropTypes.node.isRequired,\n    onHeightReady: React.PropTypes.func.isRequired,\n    hidden: React.PropTypes.bool,\n    dirty: React.PropTypes.bool\n  },\n\n\n  getDefaultProps() {\n    return {hidden: false, dirty: true};\n  },\n\n\n  getInitialState() {\n    return {\n      height: 0, dirty: this.props.dirty\n    };\n  },\n\n\n  componentDidMount() {\n    const height = this.wrapper.clientHeight;\n    const dirty = false;\n\n    this.setState({height, dirty}, () => this.props.onHeightReady(this.state.height));\n  },\n\n\n  componentWillReceiveProps({children, dirty}) {\n    if (children !== this.props.children || dirty) {\n      this.setState({dirty: true});\n    }\n  },\n\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return shallowCompare(this, nextProps, nextState);\n  },\n\n\n  componentDidUpdate() {\n    const height = this.wrapper.clientHeight;\n    const dirty = false;\n\n    if (height === this.state.height) {\n      this.setState({dirty});\n    } else {\n      this.setState({height, dirty}, () => this.props.onHeightReady(this.state.height));\n    }\n  },\n\n\n  setWrapperRef(el) {\n    this.wrapper = el;\n  },\n\n\n  render() {\n    const {\n      onHeightReady: _onHeightReady,\n      dirty: _dirty,\n      hidden,\n      children,\n      ...props\n    } = this.props;\n    const {dirty} = this.state;\n\n    if (hidden && !dirty) {\n      return null;\n    }\n\n    if (hidden) {\n      return (\n        <div style={{height: 0, overflow: 'hidden'}}>\n          <div ref={this.setWrapperRef} {...props}>{children}</div>\n        </div>\n      );\n    }\n\n    return <div ref={this.setWrapperRef} {...props}>{children}</div>;\n  }\n});\n\n\nexport default ReactHeight;\n"]}